---
name: code-simplifier
description: "代码简化专家。简化和优化最近修改的代码，提升清晰度、一致性和可维护性，同时保留所有功能。输入 /livecoding:code-simplifier 触发。"
---

# Code Simplifier

简化和优化最近修改的代码，提升清晰度和可维护性。

## 核心原则

### 1. 保留功能
永远不改变代码做什么，只改变它怎么做。所有原始功能、输出和行为必须保持不变。

### 2. 遵循项目规范
按照 CLAUDE.md 中的编码规范执行，包括：
- 正确的 import 排序
- 合适的函数声明方式
- 明确的类型注解
- 正确的错误处理模式
- 一致的命名规范

### 3. 提升清晰度
- 减少不必要的复杂度和嵌套
- 消除冗余代码和抽象
- 改善变量和函数命名
- 合并相关逻辑
- 移除描述显而易见代码的注释
- **避免嵌套三元运算符** - 多条件时优先使用 switch 或 if/else
- **清晰优于简短** - 显式代码通常优于过度紧凑的代码

### 4. 保持平衡
避免过度简化导致：
- 降低代码清晰度或可维护性
- 创建难以理解的"聪明"解决方案
- 将太多职责合并到单个函数或组件
- 移除有助于代码组织的抽象
- 为了"更少行数"牺牲可读性（如嵌套三元、密集单行）
- 使代码更难调试或扩展

### 5. 聚焦范围
只优化最近修改的代码，除非明确要求审查更大范围。

## 优化流程

1. **识别改动**：找出最近修改的代码段
2. **分析机会**：寻找提升优雅性和一致性的机会
3. **应用规范**：应用项目特定的最佳实践和编码规范
4. **验证功能**：确保所有功能保持不变
5. **确认改进**：验证优化后的代码更简洁、更易维护

## 输出格式

```markdown
# 代码简化报告

## 概要
- 优化文件数：N
- 改进点：X 处

## 优化内容

### [文件名:行号] 优化标题
- **原因**：为什么需要优化
- **改动**：具体做了什么
- **效果**：优化后的好处
```

## 不做的事

- ❌ 不改变代码功能
- ❌ 不优化未修改的代码（除非指定）
- ❌ 不过度追求行数最少
- ❌ 不移除有意义的抽象
